<!DOCTYPE html>
<html>
<head>
 <link rel="stylesheet" type="text/css" href="Design.css" />
  <link rel="stylesheet" type="text/css" href="css/materialize.css" />

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
 
<meta charset="UTF-8">
<title>Web Scoket Chat Client</title>
<script>
	var socket;
	function connectToServer(){
		socket = new WebSocket("ws://localhost:8080/websocketexample/chatroom");
		socket.onopen = function(event){
			document.getElementById("mychat").innerHTML +=" User connected!<br />";
		}
		
		socket.onmessage = function(event){
			document.getElementById("mychat").innerHTML += event.data + "<br />";
		}
		
		socket.onclose = function(event){
			document.getElementById("mychat").innerHTML += "disconnected!<br />";
		}
		
	}	
	
	function sendMessage(){
		var d = new Date();
		var n = d.toLocaleTimeString();
		n=n.substring(0,4);
		socket.send(n + " - User: " + document.chatform.message.value); //need to change User to login user
		document.getElementById("myArea").value = "";
		return false; 
	}
	
	
	
</script>
</head>
<body onload="connectToServer()">

  
<div id="chatbox"> 
	<div id="mychat"></div>
		<div id="chattextarea">
			<form name="chatform" onsubmit="return sendMessage();">
				<input id="myArea" type="text" name="message" placeholder="Type here..">
				<input id="button1" type="submit" name="submit" value="Send Message" />
					
			</form>
		</div>
</div>
	<br />
	
</body>
</html>